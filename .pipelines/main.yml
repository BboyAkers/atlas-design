# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
  - main

pool:
  vmImage: windows-latest

steps:
  - script: yarn
    displayName: Install

  - script: yarn lint
    displayName: Lint

  - script: yarn
    displayName: yarn build:site

  - task: AzureFileCopy@4
    displayName: Deploy main site
    inputs:
      SourcePath: ./site/dist
      azureSubscription: 'MSFTDOCS - AtlasDesign Content Publisher'
      Destination: 'AzureBlob'
      storage: 'atlasdesignpublic'
      ContainerName: $web
